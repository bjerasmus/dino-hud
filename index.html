<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DinoDawgs FPS HUD</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
<style>
body {
  margin: 0;
  font-family: 'Orbitron', sans-serif;
  color: #00ffff;
  background: transparent;
  overflow: hidden;
}

/* Main HUD container */
#hud {
  position: absolute;
  top: 10px;
  left: 10px;
  width: 320px;
  padding: 10px;
  background: rgba(0,0,0,0.25);
  border: 2px solid #00ffff;
  border-radius: 10px;
  box-shadow: 0 0 15px #00ffff;
}

/* Segmented bars */
.bar-container {
  width: 100%;
  height: 22px;
  background: rgba(50,50,50,0.5);
  border: 1px solid #00ffff;
  border-radius: 4px;
  margin-bottom: 6px;
  display: flex;
  overflow: hidden;
}

.bar {
  height: 100%;
  transition: width 0.3s;
  box-shadow: 0 0 8px #00ffff inset;
}

/* Health bar colors */
#health-bar {
  background: linear-gradient(to right, limegreen, #00ff80);
}

#armor-bar {
  background: linear-gradient(to right, dodgerblue, #00cfff);
}

/* Low health flash */
.low-health {
  animation: flash-red 1s infinite;
}

@keyframes flash-red {
  0%, 100% { background: red; }
  50% { background: darkred; }
}

/* Stats panel */
#stats {
  margin-top: 8px;
  background: rgba(0,0,0,0.4);
  padding: 6px;
  border-radius: 6px;
  border: 1px solid #00ffff;
  box-shadow: 0 0 10px #00ffff inset;
}

#kills, #deaths, #kdr, #squad {
  margin: 3px 0;
  font-size: 16px;
  text-shadow: 0 0 6px #00ffff;
}

/* Weapon + Ammo display */
#weapon {
  display: flex;
  align-items: center;
  margin-top: 10px;
  background: rgba(0,0,0,0.4);
  padding: 4px 6px;
  border-radius: 6px;
  border: 1px solid #00ffff;
  box-shadow: 0 0 10px #00ffff inset;
}

#weapon img {
  width: 50px;
  height: 50px;
  margin-right: 10px;
  border: 1px solid #00ffff;
  border-radius: 4px;
  box-shadow: 0 0 8px #00ffff;
}

#ammo {
  font-size: 20px;
  text-shadow: 0 0 8px #00ffff;
}

/* Power-up display */
#powerups {
  margin-top: 10px;
}

.powerup {
  display: inline-block;
  background: #ff0;
  color: #000;
  padding: 2px 6px;
  margin-right: 5px;
  border-radius: 4px;
  font-weight: bold;
  text-shadow: 0 0 4px #ff0;
}

/* Ammo warning */
.low-ammo {
  animation: flash-yellow 1s infinite;
}

@keyframes flash-yellow {
  0%, 100% { background: yellow; }
  50% { background: orange; }
}

/* Mini-map container */
#minimap-container {
  position: fixed;
  top: 10px;
  right: 10px;
  width: 180px;
  height: 180px;
  z-index: 100;
  background: rgba(0,0,0,0.25);
  border: 2px solid #00ffff;
  border-radius: 10px;
  padding: 4px;
  box-shadow: 0 0 10px #00ffff;
}

#minimap {
  width: 100%;
  height: 100%;
}

.minimap-building {
  fill: #00ffff;
  stroke: #00ffff;
  stroke-width: 1;
  opacity: 0.6;
}

.minimap-player {
  fill: #ff0;
  filter: drop-shadow(0 0 4px #ff0);
}
</style>
</head>
<body>

<div id="hud">
  <div class="bar-container">
    <div id="health-bar" class="bar"></div>
  </div>
  <div class="bar-container">
    <div id="armor-bar" class="bar"></div>
  </div>

  <div id="stats">
    <div id="squad">Squad: Alpha</div>
    <div id="kills">Kills: 0</div>
    <div id="deaths">Deaths: 0</div>
    <div id="kdr">K/D: 0.00</div>
  </div>

  <div id="weapon">
    <img id="weapon-icon" src="rifle.png" alt="Weapon">
    <span id="ammo">30</span>
  </div>

  <div id="powerups">
    <div class="powerup" id="boost">âš¡ 5s</div>
  </div>
</div>

<!-- Mini-map -->
<div id="minimap-container">
  <svg id="minimap" viewBox="-350 -250 300 300">
    <rect x="-330" y="-220" width="240" height="260" fill="none" stroke="rgba(0, 255, 255, 0.5)" stroke-width="2"/>
    <rect class="minimap-building" x="-190" y="-100" width="30" height="30"/>
    <rect class="minimap-building" x="-165" y="-95" width="20" height="25"/>
    <rect class="minimap-building" x="-250" y="-130" width="35" height="35"/>
    <rect class="minimap-building" x="-245" y="-90" width="25" height="20"/>
    <rect class="minimap-building" x="-160" y="-70" width="30" height="28"/>
    <rect class="minimap-building" x="-155" y="-40" width="22" height="22"/>
    <rect class="minimap-building" x="-210" y="-180" width="28" height="28"/>
    <rect class="minimap-building" x="-195" y="-30" width="25" height="25"/>
    <circle class="minimap-player" cx="-180" cy="-90" r="5"/>
  </svg>
</div>

<script>
// HUD update functions
function updateHealth(current, max) {
  const bar = document.getElementById('health-bar');
  const percent = (current / max) * 100;
  bar.style.width = percent + '%';
  if(percent < 25) {
    bar.classList.add('low-health');
  } else {
    bar.classList.remove('low-health');
  }
}

function updateArmor(current, max) {
  const bar = document.getElementById('armor-bar');
  const percent = (current / max) * 100;
  bar.style.width = percent + '%';
}

function updateKills(kills) {
  document.getElementById('kills').innerText = 'Kills: ' + kills;
  updateKDR();
}

function updateDeaths(deaths) {
  document.getElementById('deaths').innerText = 'Deaths: ' + deaths;
  updateKDR();
}

function updateKDR() {
  const kills = parseInt(document.getElementById('kills').innerText.split(': ')[1]);
  const deaths = parseInt(document.getElementById('deaths').innerText.split(': ')[1]);
  const kdr = deaths === 0 ? kills : (kills / deaths).toFixed(2);
  document.getElementById('kdr').innerText = 'K/D: ' + kdr;
}

function updateWeapon(name, icon, ammo) {
  const weaponIcon = document.getElementById('weapon-icon');
  const ammoElem = document.getElementById('ammo');
  weaponIcon.src = icon;
  ammoElem.innerText = ammo;
  if(ammo < 5) {
    ammoElem.classList.add('low-ammo');
  } else {
    ammoElem.classList.remove('low-ammo');
  }
}

function updateSquad(name) {
  document.getElementById('squad').innerText = 'Squad: ' + name;
}

function updatePowerup(id, label, seconds) {
  const elem = document.getElementById(id);
  elem.innerText = label + ' ' + seconds + 's';
}

// Listen for messages from parent game
window.addEventListener('message', (event) => {
  const data = event.data;

  if(data.health !== undefined && data.maxHealth !== undefined) updateHealth(data.health, data.maxHealth);
  if(data.armor !== undefined && data.maxArmor !== undefined) updateArmor(data.armor, data.maxArmor);
  if(data.kills !== undefined) updateKills(data.kills);
  if(data.deaths !== undefined) updateDeaths(data.deaths);
  if(data.weapon !== undefined) updateWeapon(data.weapon.name, data.weapon.icon, data.weapon.ammo);
  if(data.squad !== undefined) updateSquad(data.squad);
  if(data.powerups !== undefined) {
    data.powerups.forEach(p => updatePowerup(p.id, p.label, p.seconds));
  }
});
</script>
</body>
</html>
